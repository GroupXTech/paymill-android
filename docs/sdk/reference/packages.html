<!DOCTYPE html>

















































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description" content="Javadoc API documentation for PayMill Android SDK." />

<link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
<title>

  Package Index


| PayMill Android SDK

</title>
<link href="./../assets/doclava-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="./../assets/customizations.css" rel="stylesheet" type="text/css" />
<script src="./../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="./../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="./../assets/doclava-developer-docs.js" type="text/javascript"></script>
<script src="./../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("./", "./../assets/");
</script>
<script src="./../assets/doclava-developer-reference.js" type="text/javascript"></script>
<script src="./../assets/navtree_data.js" type="text/javascript"></script>
<script src="./../assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>

<body class="gc-documentation">

<div id="header">
    <div id="headerLeft">
    
      <span id="masthead-title">PayMill Android SDK</span>
    
    </div>
    <div id="headerRight">
      
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, './')"
                      onkeyup="return search_changed(event, false, './')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      
    </div>
</div><!-- header -->


  <div class="g-section g-tpl-240" id="body-content">
    <div class="g-unit g-first side-nav-resizable" id="side-nav">
      <div id="swapper">
        <div id="nav-panels">
          <div id="resize-packages-nav">
            <div id="packages-nav">
              <div id="index-links"><nobr>
                <a href="./packages.html" class="selected" >Package Index</a> | 
                <a href="./classes.html" >Class Index</a></nobr>
              </div>
              <ul>
                
    <li class="api apilevel-">
  <a href="./com/paymill/android/api/package-summary.html">com.paymill.android.api</a></li>
    <li class="api apilevel-">
  <a href="./com/paymill/android/factory/package-summary.html">com.paymill.android.factory</a></li>
    <li class="api apilevel-">
  <a href="./com/paymill/android/listener/package-summary.html">com.paymill.android.listener</a></li>
    <li class="api apilevel-">
  <a href="./com/paymill/android/service/package-summary.html">com.paymill.android.service</a></li>
              </ul><br/>
            </div> <!-- end packages -->
          </div> <!-- end resize-packages -->
          <div id="classes-nav">
              <script>
                /*addLoadEvent(maxPackageHeight);*/
              </script>
              <p style="padding:10px">Select a package to view its members</p><br/>
          </div><!-- end classes -->
        </div><!-- end nav-panels -->
        <div id="nav-tree" style="display:none">
          <div id="index-links"><nobr>
            <a href="./packages.html" class="selected" >Package Index</a> | 
            <a href="./classes.html" >Class Index</a></nobr>
          </div>
        </div><!-- end nav-tree -->
      </div><!-- end swapper -->
    </div> <!-- end side-nav -->
    <script>
      if (!isMobile) {
        $("<a href='#' id='nav-swap' onclick='swapNav();return false;' style='font-size:10px;line-height:9px;margin-left:1em;text-decoration:none;'><span id='tree-link'>Use Tree Navigation</span><span id='panel-link' style='display:none'>Use Panel Navigation</span></a>").appendTo("#side-nav");
        chooseDefaultNav();
        if ($("#nav-tree").is(':visible')) {
          init_default_navtree("./");
        } else {
          addLoadEvent(function() {
            scrollIntoView("packages-nav");
            scrollIntoView("classes-nav");
          });
        }
        $("#swapper").css({borderBottom:"2px solid #aaa"});
      } else {
        swapNav(); // tree view should be used on mobile
      }
    </script>



<div class="g-unit" id="doc-content">

<div id="jd-header">
<h1>Package Index</h1>
</div>

<div id="jd-content">

<div class="jd-descr">
<p><a name="overview_"></a>
<h2>Overview</h2>
<p>Please contact us at <a href="mailto:support@paymill.com">support@paymill.com</a> if you want to report a bug, an error in the documentation or have a suggestion or feedback.</p>
<ul>
        <li><a href="#quicksdk">QuickStart SDK</a></li>
        <li><a href="#quickps">QuickStart Payment Screens</a></li>
        <li><a href="#reqs">Requirements</a></li>
        <li><a href="#install">Installation</a></li>
        <li><a href="#interact">Interacting with the SDK</a></li>
</ul>

<a name="quicksdk"></a>
<h3>QuickStart SDK</h3>
<ul>
        <li>Grab a copy of the SDK jar and copy it into your project's libs folder.</a></li>
		<li>Add the PMService service definition and the INTERNET permission to your manifest file.</li>
		<li>Use <code><a href="./com/paymill/android/service/PMManager.html#init(android.content.Context, com.paymill.android.service.PMService.ServiceMode, java.lang.String, com.paymill.android.listener.PMBackgroundListener, java.lang.String)">PMManager.init()</a></code> to init the SDK as soon as possible in your code. We recommend you to do this in the onCreate() method of your Application class or the first shown Activity.</li>
		<li>Use the <code><a href="./com/paymill/android/factory/PMFactory.html">PMFactory</a></code> to create a <code><a href="./com/paymill/android/factory/PMPaymentParams.html">PMPaymentParams</a></code> (the parameters of a transaction) and a <code><a href="./com/paymill/android/factory/PMPaymentMethod.html">PMPaymentMethod</a></code> (the representation of the credit or debit card, direct debit etc.).</li>
		<li>Register a listener for a transaction. We recommend you to register a BackgroundListener for a more reliable way to consume transaction results.</li>
		<li>Trigger a transaction using <code><a href="./com/paymill/android/service/PMManager.html#transaction(android.content.Context, java.lang.String, com.paymill.android.factory.PMPaymentParams, boolean)">transaction(android.content.Context, String, com.paymill.android.factory.PMPaymentParams, boolean)</a></code>.</li>
		<li>Receive the result in your listener and reward.</li>
		<li>You can clone and  run the VoucherMill sample app and inspect the source to get familiar with the SDK.</li>
</ul>
<pre>PMManager.init(getApplicationContext(), ServiceMode.TEST, &quot;mypublickey&quot;,backgroundListener, null);
...
PMPaymentMethod method = PMFactory.genCardPayment(&quot;Max Mustermann&quot;, &quot;4111111111111111&quot; , &quot;12&quot;, &quot;2015&quot;, &quot;1234&quot;);
PMPaymentParams params = PMFactory.genPaymentParams(&quot;EUR&quot;, 100, null);
PMManager.addListener(transListener);
PMManager.transaction(getApplicationContext(), method, params, true);
...
PMManager.removeListener(transListener);
... 
public void onInit(String deviceId) {
	// you can now use the sdk
}
... 
public void onTransaction(Transaction transaction) {
	// reward the user
}
</pre>		

<a name="quickps"></a>
<h3>QuickStart Payment Screens</h3>
<p><b>Note:</b> Although you can use the predefined payment screens directly, we encourage you to go through the whole SDK documentation to get a better understanding how it works.</p>
<ul>
        <li>Grab a copy of the SDK jar and copy it into your project's libs folder.</a></li>
		<li>Download the VoucherMill sample application.</li>
		<li>You can run the VoucherMill sample app and inspect the source to get familiar with the SDK.</li>
		<li>Copy all resources starting with "pm_" from the res/layout and res/values folders to your project.</li>
		<li>Copy all java sources from the package "com.paymill.android.payment" to your project and fix your "R" imports.</li>
		<li>Add the PMService service definition and the PaymentActivity definition inside your application tag in your AndroidManifest.xml. Also add the INTERNET permission, if you don't already have it.</li>
		<li>Create <code><a href="./com/paymill/android/factory/PMPaymentParams.html">PMPaymentParams</a></code> that describe your transaction using the <code><a href="./com/paymill/android/factory/PMFactory.html">PMFactory</a></code>.</li>
		<li>Create an Intent for the PaymentActivity with PaymentActivity.Factory.getTransactionIntent() and start it with startActivityForResult(intent, PaymentActivity.REQUEST_CODE).</li>
		<li>In your startActivityForResult(), pass the parameters to PaymentActivity.Factory.getResultFrom(). The result will be null if the result does not come from the PaymentActivity or is not valid.</li>
		<li>Reward the user, based on the result.</li>
</ul>
<pre>PMManager.init(getApplicationContext(), ServiceMode.TEST, &quot;mypublickey&quot;,backgroundListener, null);
...
PMPaymentParams params = PMFactory.genPaymentParams(&quot;EUR&quot;, 100, null);
Intent intent = PaymentActivity.Factory.getTransactionIntent(getActivity(), params, true);
startActivityForResult(intent, PaymentActivity.REQUEST_CODE);
...
public void onActivityResult(int requestCode, int resultCode, Intent data) {
	PaymentActivity.Result result = PaymentActivity.Factory.getResultFrom(requestCode, resultCode, data);
	if (result!=null) {
		if (result.isSuccess()) {
...
	} else {
		// this is not the result we were looking for
	}
}
</pre>		

<a name="reqs"></a>
<h3>Requirements</h3>
<p>The SDK has and requires no external dependencies. It works with Android API Level 8 and up.</p>
<p><b>Important:</b>Altough the SDK works with API Level 8, it will currently work only on Android Gingerbread MR1 (2.3.3 API 10) and up. This should be fixed really soon (no SDK update will be required). Stay tuned!</p>

<a name="install"></a>
<h3>Installation</h3>
<p>The SDK is distributed as a jar file. Please follow your IDE's steps to add it to your Android project.</p>
<ul>
        <li>Eclipse users:
		<p>Copy the paymill-android.jar in your main project's /libs folder.</p>
		</li>
        <li>IntelliJ users:
		<p>Copy the paymill-android.jar in your main project's /libs folder. Go to Modules | Dependencies and add the jar file.</p>
		</li>
        <li>Maven users:
		<p>The SDK will soon be uploaded to maven central. Please be patient.</p>
		</li>
		</li>
</ul>
<p>You will have to add the following service definition inside the application tag in your AndroidManifest.xml: </p>
<pre>
 &lt;!-- paymill sdk service --&gt;
 &lt;service android:name=&quot;com.paymill.android.service.PMService&quot;
         android:enabled=&quot;true&quot; android:exported=&quot;false&quot;&gt;
 &lt;/service&gt;
</pre>

<p>You will also have to add the INTERNET permission to your AndroidManifest.xml:</p>
<pre>
&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
</pre>

<a name="interact"></a>
<h2>Interacting with the SDK</h2>
<p>The main interface of the SDK is the PMManager class. It includes static methods to register listeners and trigger asynchronous request to the PayMill servers, like creating a transaction or preauthorization. All of these methods return immediately and are thread-safe. Before you make a request you should add an appropriate listener to receive the result. The SDK supports two types of listeners:</p>
<ul>
	<li>Foreground Listeners.</li>
	<li>A Background Listener.</li>
</ul>
<p>Foreground listeners are added with the addListener() methods. When the SDK is ready processing a request, it will execute the appropriate callback method of all listeners of the correct type. The methods are executed on the UI thread, so you don't need to worry about race conditions.</p>
<p>The SDK also supports a <code><a href="./com/paymill/android/listener/PMBackgroundListener.html">Background Listener</a></code>. You should use it to do critical long running operations, like rewarding a successful transaction to the user by calling a remote server. The callbacks are executed on a separate Thread, which holds the PMService in foreground mode, as long as the callback method returns.<br/>
<b>Note:</b> You should not take too long in the callback, as the PMService will not quit foreground mode untill the method returns!
</p>
<p>A typical app may take advantage of both listeners, using a foreground listener to inform the user of sucessfull transaction, while using the background listener to reward the user.</p>
<p><b>Important:</b>The SDK holds strong references to both Foreground and Background Listeners. To not leak resources, make sure you remove listeners that hold references to UI elements. A good practice is to add your listener onCreate() and remove it onDestroy().</p></p>
</div>


<table class="jd-sumtable">

    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol">
  <a href="./com/paymill/android/api/package-summary.html">com.paymill.android.api</a></td>
        <td class="jd-descrcol" width="100%">Contains the classes for all PayMill API Objects.</td>
    </tr>


    <tr class=" api apilevel-" >
        <td class="jd-linkcol">
  <a href="./com/paymill/android/factory/package-summary.html">com.paymill.android.factory</a></td>
        <td class="jd-descrcol" width="100%">Contains the SDK <code><a href="./com/paymill/android/factory/PMFactory.html">factory</a></code>.</td>
    </tr>


    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol">
  <a href="./com/paymill/android/listener/package-summary.html">com.paymill.android.listener</a></td>
        <td class="jd-descrcol" width="100%">Contains the listener interfaces for all SDK callbacks.</td>
    </tr>


    <tr class=" api apilevel-" >
        <td class="jd-linkcol">
  <a href="./com/paymill/android/service/package-summary.html">com.paymill.android.service</a></td>
        <td class="jd-descrcol" width="100%">Contains the main entry point of the SDK <code><a href="./com/paymill/android/service/PMManager.html">PMManager</a></code> and the service class <code><a href="./com/paymill/android/service/PMService.html">PMService</a></code>.</td>
    </tr>


</table>

<div id="footer">
Generated by <a href="http://code.google.com/p/doclava/">Doclava</a>.
</div> <!-- end footer -->

</div><!-- end jd-content -->
</div> <!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize doclava-developer-docs.js */
</script>

</body>
</html>
